<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Interactive component | NYC School Safey</title>
  <meta name="description" content="Chapter 5 Interactive component | NYC School Safey" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Interactive component | NYC School Safey" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Interactive component | NYC School Safey" />
  
  
  

<meta name="author" content="Tseng-Han Yu, Xiangming Huang" />


<meta name="date" content="2022-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYCSchool</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.2</b> Cleaning / transformation</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.3</b> Missing value analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#scatterplot-for-total-crimes-v.s.-total-number-of-students"><i class="fa fa-check"></i><b>4.1</b> Scatterplot for total crimes v.s. total number of students</a></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#parallel-coordinate-plot-for-school-districts"><i class="fa fa-check"></i><b>4.2</b> Parallel coordinate plot for school districts</a></li>
<li class="chapter" data-level="4.3" data-path="results.html"><a href="results.html#treemap-for-total-registered-students-and-the-number-of-schools-in-each-districts"><i class="fa fa-check"></i><b>4.3</b> Treemap for total registered students and the number of schools in each districts</a></li>
<li class="chapter" data-level="4.4" data-path="results.html"><a href="results.html#time-series-of-total-crime-in-new-york-city"><i class="fa fa-check"></i><b>4.4</b> Time Series of total crime in New York City</a></li>
<li class="chapter" data-level="4.5" data-path="results.html"><a href="results.html#time-series-plot-regarding-number-of-crimes-in-each-category"><i class="fa fa-check"></i><b>4.5</b> Time series plot regarding number of crimes in each category</a></li>
<li class="chapter" data-level="4.6" data-path="results.html"><a href="results.html#bar-chart-regarding-number-of-schools-at-each-location"><i class="fa fa-check"></i><b>4.6</b> Bar chart regarding number of schools at each location</a></li>
<li class="chapter" data-level="4.7" data-path="results.html"><a href="results.html#mosaic-plot-school-yearboroughsnumber-of-crimes-in-each-category"><i class="fa fa-check"></i><b>4.7</b> Mosaic plot (school year/boroughs/number of crimes in each category)</a></li>
<li class="chapter" data-level="4.8" data-path="results.html"><a href="results.html#cleveland-dot-plot"><i class="fa fa-check"></i><b>4.8</b> Cleveland dot plot</a></li>
<li class="chapter" data-level="4.9" data-path="results.html"><a href="results.html#scatter-plot-matrix-for-5-different-type-of-crimes"><i class="fa fa-check"></i><b>4.9</b> Scatter plot matrix for 5 different type of crimes</a></li>
<li class="chapter" data-level="4.10" data-path="results.html"><a href="results.html#principle-components-analysis-pca"><i class="fa fa-check"></i><b>4.10</b> Principle components analysis (PCA)</a></li>
<li class="chapter" data-level="4.11" data-path="results.html"><a href="results.html#scatterplot-with-total-school-and-total-crime"><i class="fa fa-check"></i><b>4.11</b> Scatterplot with total school and total crime</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC School Safey</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Interactive component<a href="interactive-component.html#interactive-component" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<script src="https://d3js.org/d3.v7.js"></script>
<p id="color" style="background-color: silver; color: white;">
Please select school year:
</p>
<p><input type="radio" id="html" name="fav_color" value="bardata1"> 2013-2014
<input type="radio" id="css" name="fav_color" value="bardata2"> 2014-2015
<input type="radio" id="javascript" name="fav_color" value="bardata3"> 2015-2016</p>
<svg id="gup">
</svg>
<script>
      const w = 450;  // change this value and see what happens
      const h = 300;
      const margin = {top: 25, right: 0, bottom: 25, left: 50};
      const innerWidth = w - margin.left - margin.right;
      const innerHeight = h - margin.top - margin.bottom;
    
    d3.select("svg#gup")
    .attr("width", w)
    .attr("height", h);
    
    d3.select("svg#gup")
    .append("rect")
    .attr("x", 0)
    .attr("y", 0)
    .attr("width", w)
    .attr("height", h)
    .attr("fill", "aliceblue");

    
    const bardata1 = [{key: "major_crime", value: 649},
                      {key: "other_crime", value: 2461},
                      {key: "non-criminal_crime", value: 3759},
                      {key: "property_crime", value: 1585},
                      {key: "violent_crime", value: 1067}];
      
    const bardata2 = [{key: "major_crime", value: 606},
                      {key: "other_crime", value: 2264},
                      {key: "non-criminal_crime", value: 3941},
                      {key: "property_crime", value: 1554},
                      {key: "violent_crime", value: 1048}];
    
    const bardata3 = [{key: "major_crime", value: 521},
                      {key: "other_crime", value: 2196},
                      {key: "non-criminal_crime", value: 4053},
                      {key: "property_crime", value: 1332},
                      {key: "violent_crime", value: 1058}];

    const metadata = {"bardata1": bardata1,
                      "bardata2": bardata2,
                      "bardata3": bardata3}

      const xScale = d3.scaleBand()
      .domain(bardata1.map(d => d.key))
      .range([0, innerWidth])
      .paddingInner(.1);
        
    const yScale = d3.scaleLinear()
      .domain([0, 4200])
      .range([innerHeight, 0])
      
    const xAxis = d3.axisBottom()
      .scale(xScale);
      
    const yAxis = d3.axisLeft()
      .scale(yScale);
      
    const bars = 
        d3.select("svg#gup")
        .append("g")
        .attr("id", "plot")
      .attr("transform", `translate (${margin.left}, ${margin.top})`)
      .selectAll("rect")
      .data(bardata1);
    
    const svg = 
      d3.select("svg#gup");

       bars.enter().append("rect")
      .attr("x", d => xScale(d.key))
      .attr("y", d => yScale(d.value))
      .attr("width", xScale.bandwidth())
      .attr("height", d => innerHeight - yScale(d.value))
      .attr("fill", "lightgreen");
      
      svg.append("g")
      .attr("class", "xAxis")
      .attr("transform", `translate (${margin.left}, ${h - margin.bottom})`)
      .call(xAxis);

    svg.append("g")
      .attr("class", "yAxis")
      .attr("transform", `translate (${margin.left}, ${margin.top})`)
      .call(yAxis);
      
    
    d3.selectAll("input")
    .on("click", function(event) {
      const favcolor = event.currentTarget.value
      
      d3.select("svg#gup").select("g#plot")
      .selectAll("rect")
      .data(metadata[favcolor])
      .attr("x", d => xScale(d.key))
      .attr("width", xScale.bandwidth())
      .transition()
      .duration(3000)
      .attr("height", d => innerHeight - yScale(d.value))
      .attr("y", d => yScale(d.value));
      });
          
</script>
<p>What is the change in overall school safety in NYC over years? To answer this question, we have made a time series plot to visualize changes between the total numbers of five types of school crime for 3 consecutive school years. We observed a mixed message, as some are increasing, some are decreasing, and others remain the same. We also notice the total number of each different type of school crime varies. To better understand those changes and have a sense of overall school safety, We made a bar chart by D3 to better visualize our result.
By clicking buttons representing different school years, we can observe the change in the total number of different types of crime. By observing the magnitude of change in each bar chart, we have a general understanding of how school safety in NYC changes over time. This provides more insight than just looking at a static time series plot.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/xmh3698/NYCSchoolSafety/edit/main/interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/xmh3698/NYCSchoolSafety/blob/main/interactive.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
